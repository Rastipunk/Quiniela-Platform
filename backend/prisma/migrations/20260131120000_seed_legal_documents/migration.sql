-- Seed Legal Documents for Picks4All
-- This migration inserts the initial Terms of Service and Privacy Policy

-- First, deactivate any existing documents of these types
UPDATE "LegalDocument" SET "isActive" = false WHERE "type" = 'TERMS_OF_SERVICE' AND "locale" = 'es';
UPDATE "LegalDocument" SET "isActive" = false WHERE "type" = 'PRIVACY_POLICY' AND "locale" = 'es';

-- Insert Terms of Service
INSERT INTO "LegalDocument" (
  "id", "type", "version", "title", "content", "changeSummary", "locale", "isActive", "publishedAt", "effectiveAt", "createdAtUtc", "updatedAtUtc"
) VALUES (
  gen_random_uuid(),
  'TERMS_OF_SERVICE',
  '2026-01-25',
  'Términos de Servicio',
  E'# Términos de Servicio\n\n**Última actualización:** 25 de enero de 2026\n**Versión:** 2026-01-25\n\n---\n\n## 1. Aceptación de los Términos\n\nAl acceder o utilizar la plataforma Picks4All ("la Plataforma", "el Servicio", "nosotros"), usted acepta estar legalmente vinculado por estos Términos de Servicio ("Términos"). Si no está de acuerdo con alguno de estos términos, no debe utilizar el Servicio.\n\nEstos Términos constituyen un acuerdo legal vinculante entre usted ("Usuario", "usted") y los operadores de la Plataforma.\n\n---\n\n## 2. Descripción del Servicio\n\n### 2.1 Naturaleza del Servicio\n\nLa Plataforma es un servicio de entretenimiento que permite a los usuarios:\n\n- Crear y participar en "pools" (grupos de predicciones) sobre eventos deportivos\n- Realizar predicciones ("picks") sobre resultados de partidos\n- Competir con otros usuarios en tablas de clasificación ("leaderboards")\n- Gestionar grupos privados de amigos, familiares o comunidades\n\n### 2.2 Declaración Importante: NO es Apuestas ni Juegos de Azar\n\n**LA PLATAFORMA NO ES UN SITIO DE APUESTAS NI DE JUEGOS DE AZAR.**\n\n- No se requiere ni se acepta dinero real para participar en las predicciones\n- No se otorgan premios en dinero a través de la Plataforma\n- Las predicciones son puramente recreativas y de entretenimiento\n- La Plataforma no facilita, promueve ni está asociada con actividades de apuestas\n\nCualquier premio, recompensa o reconocimiento que los organizadores de pools decidan otorgar es responsabilidad exclusiva de dichos organizadores y se realiza fuera del ámbito de la Plataforma.\n\n---\n\n## 3. Elegibilidad y Registro\n\n### 3.1 Requisitos de Edad\n\nPara utilizar la Plataforma, usted debe:\n\n- Tener al menos **13 años de edad**\n- Si es menor de 18 años, contar con el consentimiento de sus padres o tutores legales\n\n### 3.2 Cuenta de Usuario\n\nAl registrarse, usted se compromete a:\n\n- Proporcionar información veraz, actual y completa\n- Mantener la confidencialidad de sus credenciales de acceso\n- Ser responsable de todas las actividades realizadas con su cuenta\n- Notificarnos inmediatamente sobre cualquier uso no autorizado\n\n### 3.3 Una Cuenta por Usuario\n\nCada persona física puede mantener únicamente una cuenta activa. La creación de múltiples cuentas puede resultar en la suspensión o terminación de todas las cuentas asociadas.\n\n---\n\n## 4. Uso Aceptable\n\n### 4.1 Conducta del Usuario\n\nAl utilizar la Plataforma, usted acepta:\n\n- Cumplir con todas las leyes y regulaciones aplicables\n- Respetar a otros usuarios y mantener un ambiente cordial\n- No utilizar lenguaje ofensivo, discriminatorio o amenazante\n- No intentar manipular, hackear o comprometer la seguridad del Servicio\n- No utilizar bots, scripts automatizados o herramientas de scraping\n- No suplantar la identidad de otras personas\n\n### 4.2 Contenido del Usuario\n\nLos nombres de usuario, nombres para mostrar y cualquier contenido que genere:\n\n- No deben ser ofensivos, discriminatorios o inapropiados\n- No deben infringir derechos de terceros (marcas, derechos de autor, etc.)\n- No deben contener información personal de terceros sin su consentimiento\n\n### 4.3 Uso Prohibido\n\nEstá expresamente prohibido:\n\n- Utilizar la Plataforma para actividades ilegales\n- Intentar acceder a cuentas de otros usuarios\n- Distribuir malware o código malicioso\n- Realizar ingeniería inversa del software\n- Revender o comercializar el acceso al Servicio\n- Utilizar la Plataforma para organizar apuestas con dinero real\n\n---\n\n## 5. Pools y Predicciones\n\n### 5.1 Creación de Pools\n\nLos usuarios pueden crear pools como "Hosts" (anfitriones). El Host es responsable de:\n\n- Configurar las reglas del pool (sistema de puntuación, plazos, etc.)\n- Gestionar la membresía del pool\n- Publicar resultados oficiales de los partidos\n- Mantener un ambiente justo para todos los participantes\n\n### 5.2 Participación en Pools\n\nLos participantes ("Players") aceptan:\n\n- Cumplir con las reglas específicas de cada pool\n- Realizar sus predicciones antes de los plazos establecidos\n- Aceptar los resultados publicados por el Host\n- Respetar las decisiones de los administradores del pool\n\n### 5.3 Plazos (Deadlines)\n\n- Las predicciones deben realizarse antes del plazo configurado para cada partido\n- Una vez pasado el plazo, las predicciones no pueden modificarse\n- El plazo predeterminado es 10 minutos antes del inicio del partido\n\n### 5.4 Resultados y Puntuación\n\n- Los Hosts publican los resultados oficiales de cada partido\n- La puntuación se calcula automáticamente según las reglas configuradas\n- Las correcciones de errores ("erratas") quedan registradas con trazabilidad\n\n---\n\n## 6. Propiedad Intelectual\n\n### 6.1 Nuestra Propiedad\n\nLa Plataforma, incluyendo su código, diseño, logos, textos y funcionalidades, es propiedad de sus operadores y está protegida por leyes de propiedad intelectual.\n\n### 6.2 Licencia de Uso\n\nLe otorgamos una licencia limitada, no exclusiva, intransferible y revocable para utilizar la Plataforma únicamente para su uso personal y no comercial, sujeto a estos Términos.\n\n### 6.3 Contenido de Terceros\n\nLa información sobre equipos, torneos y partidos puede provenir de fuentes de terceros. Los nombres, logos y marcas de equipos y competiciones pertenecen a sus respectivos propietarios.\n\n---\n\n## 7. Privacidad\n\nEl uso de sus datos personales se rige por nuestra [Política de Privacidad](/privacy), que forma parte integral de estos Términos. Al aceptar estos Términos, también acepta nuestra Política de Privacidad.\n\n---\n\n## 8. Disponibilidad del Servicio\n\n### 8.1 Sin Garantía de Disponibilidad\n\nEl Servicio se proporciona "tal cual" y "según disponibilidad". No garantizamos:\n\n- Disponibilidad ininterrumpida del Servicio\n- Ausencia de errores o defectos\n- Que el Servicio cumpla con todas sus expectativas\n\n### 8.2 Mantenimiento\n\nNos reservamos el derecho de:\n\n- Realizar mantenimiento programado o de emergencia\n- Modificar, suspender o discontinuar funcionalidades\n- Actualizar el Servicio sin previo aviso\n\n---\n\n## 9. Limitación de Responsabilidad\n\n### 9.1 Exclusión de Daños\n\nEn la máxima medida permitida por la ley, no seremos responsables por:\n\n- Daños indirectos, incidentales, especiales o consecuentes\n- Pérdida de datos, beneficios o oportunidades\n- Interrupciones del servicio\n- Acciones de otros usuarios\n- Cualquier actividad realizada fuera de la Plataforma (incluyendo premios organizados por terceros)\n\n### 9.2 Límite de Responsabilidad\n\nNuestra responsabilidad total no excederá el monto que usted haya pagado por el Servicio en los últimos 12 meses, o $0 si no ha realizado ningún pago.\n\n---\n\n## 10. Indemnización\n\nUsted acepta indemnizar y mantener indemne a la Plataforma, sus operadores, empleados y afiliados frente a cualquier reclamación, daño, pérdida o gasto (incluyendo honorarios legales) que surja de:\n\n- Su uso del Servicio\n- Su violación de estos Términos\n- Su violación de derechos de terceros\n- Contenido que usted genere o comparta\n\n---\n\n## 11. Terminación\n\n### 11.1 Por el Usuario\n\nPuede cerrar su cuenta en cualquier momento contactándonos o utilizando las opciones disponibles en la Plataforma.\n\n### 11.2 Por Nosotros\n\nNos reservamos el derecho de suspender o terminar su cuenta si:\n\n- Viola estos Términos\n- Realiza actividades fraudulentas o sospechosas\n- No utiliza la cuenta por un período prolongado\n- Por cualquier otra razón a nuestra discreción\n\n### 11.3 Efectos de la Terminación\n\nTras la terminación:\n\n- Perderá acceso a su cuenta y datos asociados\n- Las cláusulas que por su naturaleza deban sobrevivir, continuarán en vigor\n\n---\n\n## 12. Modificaciones\n\n### 12.1 Cambios a los Términos\n\nPodemos modificar estos Términos en cualquier momento. Le notificaremos sobre cambios materiales mediante:\n\n- Aviso en la Plataforma\n- Correo electrónico a la dirección registrada\n- Solicitud de re-aceptación al iniciar sesión\n\n### 12.2 Aceptación de Cambios\n\nEl uso continuado del Servicio después de la notificación constituye aceptación de los nuevos Términos.\n\n---\n\n## 13. Disposiciones Generales\n\n### 13.1 Ley Aplicable\n\nEstos Términos se rigen por las leyes de la República de Colombia, sin perjuicio de las normas de protección al consumidor de su jurisdicción que puedan aplicar.\n\n### 13.2 Resolución de Disputas\n\nPara cualquier disputa relacionada con estos Términos o el Servicio:\n\n1. Primero intentaremos resolverla de manera amistosa\n2. Si no es posible, las partes acuerdan someterse a los tribunales competentes de Bogotá, Colombia\n\n### 13.3 Divisibilidad\n\nSi alguna disposición de estos Términos se considera inválida, las demás disposiciones permanecerán en pleno vigor.\n\n### 13.4 Renuncia\n\nLa falta de ejercicio de cualquier derecho bajo estos Términos no constituye una renuncia a dicho derecho.\n\n### 13.5 Acuerdo Completo\n\nEstos Términos, junto con la Política de Privacidad, constituyen el acuerdo completo entre usted y nosotros respecto al uso del Servicio.\n\n---\n\n## 14. Contacto\n\nPara preguntas sobre estos Términos de Servicio, puede contactarnos en:\n\n- **Correo electrónico:** soporte@picks4all.com\n\n---\n\n*Al utilizar la Plataforma, usted confirma que ha leído, entendido y aceptado estos Términos de Servicio.*',
  'Versión inicial de los Términos de Servicio.',
  'es',
  true,
  NOW(),
  NOW(),
  NOW(),
  NOW()
) ON CONFLICT DO NOTHING;

-- Insert Privacy Policy
INSERT INTO "LegalDocument" (
  "id", "type", "version", "title", "content", "changeSummary", "locale", "isActive", "publishedAt", "effectiveAt", "createdAtUtc", "updatedAtUtc"
) VALUES (
  gen_random_uuid(),
  'PRIVACY_POLICY',
  '2026-01-25',
  'Política de Privacidad',
  E'# Política de Privacidad\n\n**Última actualización:** 25 de enero de 2026\n**Versión:** 2026-01-25\n\n---\n\n## 1. Introducción\n\nEsta Política de Privacidad describe cómo la plataforma Picks4All ("la Plataforma", "el Servicio", "nosotros") recopila, utiliza, almacena y protege su información personal.\n\nNos comprometemos a proteger su privacidad y a ser transparentes sobre nuestras prácticas de datos. Al utilizar nuestro Servicio, usted acepta las prácticas descritas en esta Política.\n\n---\n\n## 2. Información que Recopilamos\n\n### 2.1 Información que Usted Proporciona\n\n**Datos de registro:**\n- Dirección de correo electrónico\n- Nombre de usuario (username)\n- Nombre para mostrar (display name)\n- Contraseña (almacenada de forma segura con hash)\n\n**Datos de perfil opcionales:**\n- Zona horaria preferida\n- Preferencias de notificaciones\n\n**Datos de uso del servicio:**\n- Predicciones realizadas en pools\n- Participación en pools (como host o jugador)\n- Interacciones con otros usuarios\n\n### 2.2 Información Recopilada Automáticamente\n\n**Datos técnicos:**\n- Dirección IP\n- Tipo de navegador y versión\n- Sistema operativo\n- Identificadores de dispositivo\n- Páginas visitadas y tiempo de permanencia\n\n**Datos de registro (logs):**\n- Fecha y hora de acceso\n- Acciones realizadas (inicio de sesión, creación de pools, etc.)\n- Errores y eventos del sistema\n\n### 2.3 Información de Terceros\n\nSi elige iniciar sesión con Google:\n- ID de usuario de Google\n- Nombre asociado a su cuenta de Google\n- Dirección de correo electrónico de Google\n\nNo accedemos a sus contactos, calendario, archivos de Drive ni ningún otro dato de Google más allá de lo mencionado.\n\n---\n\n## 3. Cómo Utilizamos su Información\n\nUtilizamos su información para:\n\n### 3.1 Proveer el Servicio\n- Crear y gestionar su cuenta\n- Permitir su participación en pools\n- Calcular puntuaciones y clasificaciones\n- Enviar notificaciones sobre actividad relevante\n\n### 3.2 Mejorar el Servicio\n- Analizar patrones de uso (de forma agregada)\n- Identificar y corregir errores\n- Desarrollar nuevas funcionalidades\n- Optimizar rendimiento y experiencia de usuario\n\n### 3.3 Comunicaciones\n- Enviar correos transaccionales (recuperación de contraseña, etc.)\n- Notificar cambios en los Términos o Política de Privacidad\n- Enviar comunicaciones de marketing (solo si dio su consentimiento)\n\n### 3.4 Seguridad y Cumplimiento\n- Detectar y prevenir fraude o abuso\n- Cumplir con obligaciones legales\n- Proteger nuestros derechos y los de otros usuarios\n- Mantener registros de auditoría\n\n---\n\n## 4. Base Legal para el Procesamiento\n\nProcesamos su información bajo las siguientes bases legales:\n\n| Base Legal | Aplicación |\n|------------|------------|\n| **Consentimiento** | Comunicaciones de marketing, cookies opcionales |\n| **Ejecución de contrato** | Proveer el servicio, gestionar su cuenta |\n| **Interés legítimo** | Seguridad, prevención de fraude, mejora del servicio |\n| **Obligación legal** | Cumplimiento de leyes y regulaciones |\n\n---\n\n## 5. Cómo Compartimos su Información\n\n### 5.1 Con Otros Usuarios\n\nDentro de la Plataforma, otros usuarios pueden ver:\n- Su nombre de usuario y nombre para mostrar\n- Su posición en las tablas de clasificación\n- Sus predicciones (después del deadline de cada partido)\n- Su historial de participación en pools compartidos\n\n### 5.2 Con Proveedores de Servicios\n\nPodemos compartir datos con proveedores que nos ayudan a operar el Servicio:\n\n| Proveedor | Propósito | Datos Compartidos |\n|-----------|-----------|-------------------|\n| Proveedor de hosting | Almacenamiento y servidores | Todos los datos del servicio |\n| Servicio de email | Envío de correos | Email, nombre |\n| Servicio de autenticación (Google) | Login social | ID de sesión |\n\nEstos proveedores están obligados contractualmente a proteger sus datos y solo pueden usarlos para los fines especificados.\n\n### 5.3 Por Razones Legales\n\nPodemos divulgar información si creemos de buena fe que es necesario para:\n- Cumplir con una obligación legal\n- Responder a solicitudes legales válidas (órdenes judiciales, etc.)\n- Proteger la seguridad de usuarios o el público\n- Defender nuestros derechos legales\n\n### 5.4 Transferencias de Negocio\n\nEn caso de fusión, adquisición o venta de activos, su información podría transferirse como parte de la transacción. Le notificaremos sobre cualquier cambio de propietario o uso de su información.\n\n### 5.5 Lo que NO Hacemos\n\n- **NO vendemos** su información personal\n- **NO compartimos** datos con anunciantes para publicidad dirigida\n- **NO usamos** sus datos para perfilamiento con fines comerciales de terceros\n\n---\n\n## 6. Retención de Datos\n\n### 6.1 Períodos de Retención\n\n| Tipo de Dato | Período de Retención |\n|--------------|----------------------|\n| Datos de cuenta | Mientras la cuenta esté activa + 30 días |\n| Predicciones y puntuaciones | Mientras la cuenta esté activa |\n| Logs de seguridad | 12 meses |\n| Logs de auditoría | 24 meses |\n| Datos de pools eliminados | 90 días (para posible restauración) |\n\n### 6.2 Eliminación de Cuenta\n\nCuando solicite eliminar su cuenta:\n- Sus datos personales se eliminarán en un plazo de 30 días\n- Datos anonimizados pueden conservarse para análisis estadístico\n- Logs de auditoría se mantienen por el período legal requerido\n\n---\n\n## 7. Sus Derechos\n\nDependiendo de su ubicación, usted puede tener los siguientes derechos:\n\n### 7.1 Derechos Generales\n\n- **Acceso:** Solicitar una copia de sus datos personales\n- **Rectificación:** Corregir datos inexactos o incompletos\n- **Eliminación:** Solicitar la eliminación de sus datos\n- **Portabilidad:** Recibir sus datos en formato estructurado\n- **Objeción:** Oponerse a ciertos tipos de procesamiento\n\n### 7.2 Para Usuarios en Colombia\n\nBajo la Ley 1581 de 2012 (Ley de Habeas Data), usted tiene derecho a:\n- Conocer, actualizar y rectificar su información\n- Solicitar prueba de la autorización otorgada\n- Ser informado sobre el uso de sus datos\n- Revocar la autorización y/o solicitar supresión\n- Presentar quejas ante la SIC (Superintendencia de Industria y Comercio)\n\n### 7.3 Para Usuarios en la Unión Europea\n\nBajo el GDPR, además de los derechos generales, usted tiene derecho a:\n- Retirar su consentimiento en cualquier momento\n- Presentar quejas ante su autoridad de protección de datos local\n- No ser objeto de decisiones automatizadas con efectos legales\n\n### 7.4 Para Usuarios en Estados Unidos (California)\n\nBajo la CCPA, los residentes de California tienen derecho a:\n- Conocer qué información personal se recopila\n- Saber si su información se vende o comparte\n- Optar por no participar en la venta de datos (no vendemos datos)\n- No ser discriminados por ejercer sus derechos\n\n### 7.5 Cómo Ejercer sus Derechos\n\nPara ejercer cualquiera de estos derechos, contáctenos en:\n- **Email:** privacidad@picks4all.com\nResponderemos a su solicitud dentro de los plazos legales aplicables (generalmente 15-30 días).\n\n---\n\n## 8. Seguridad de Datos\n\n### 8.1 Medidas Técnicas\n\nImplementamos medidas de seguridad que incluyen:\n- Cifrado de datos en tránsito (HTTPS/TLS)\n- Cifrado de contraseñas con algoritmos seguros (bcrypt)\n- Tokens de autenticación con expiración\n- Protección contra ataques comunes (XSS, CSRF, SQL injection)\n\n### 8.2 Medidas Organizativas\n\n- Acceso restringido a datos personales (principio de mínimo privilegio)\n- Políticas internas de seguridad de información\n- Monitoreo de accesos y actividades sospechosas\n\n### 8.3 Limitaciones\n\nNingún sistema es 100% seguro. Aunque nos esforzamos por proteger su información, no podemos garantizar seguridad absoluta. Usted es responsable de mantener la confidencialidad de sus credenciales.\n\n---\n\n## 9. Transferencias Internacionales\n\n### 9.1 Ubicación de Datos\n\nNuestros servidores pueden estar ubicados en diferentes países. Al utilizar el Servicio, usted consiente la transferencia de sus datos a estas ubicaciones.\n\n### 9.2 Salvaguardas\n\nPara transferencias fuera de su jurisdicción, implementamos:\n- Cláusulas contractuales estándar aprobadas\n- Evaluaciones de impacto cuando son requeridas\n- Acuerdos de procesamiento de datos con proveedores\n\n---\n\n## 10. Menores de Edad\n\n### 10.1 Edad Mínima\n\nEl Servicio está destinado a usuarios de **13 años o más**.\n\n### 10.2 Menores de 18 años\n\nSi tiene entre 13 y 17 años, debe contar con el consentimiento de sus padres o tutores legales para utilizar el Servicio.\n\n### 10.3 Menores de 13 años\n\nNo recopilamos intencionalmente información de menores de 13 años. Si descubrimos que hemos recopilado datos de un menor de 13 años, eliminaremos esa información inmediatamente.\n\nSi usted es padre/tutor y cree que su hijo menor de 13 años ha proporcionado información, contáctenos.\n\n---\n\n## 11. Cookies y Tecnologías Similares\n\n### 11.1 Uso Actual\n\nActualmente, la Plataforma utiliza:\n- **LocalStorage del navegador:** Para almacenar su token de sesión\n- **No utilizamos cookies de seguimiento ni de terceros**\n\n### 11.2 Cambios Futuros\n\nSi en el futuro implementamos cookies adicionales:\n- Le informaremos mediante actualización de esta Política\n- Solicitaremos su consentimiento cuando sea requerido\n- Proporcionaremos opciones para gestionar sus preferencias\n\n---\n\n## 12. Enlaces a Terceros\n\nLa Plataforma puede contener enlaces a sitios web de terceros. No somos responsables de las prácticas de privacidad de estos sitios. Le recomendamos revisar sus políticas de privacidad antes de proporcionarles información.\n\n---\n\n## 13. Cambios a Esta Política\n\n### 13.1 Notificación de Cambios\n\nPodemos actualizar esta Política de Privacidad periódicamente. Le notificaremos sobre cambios materiales mediante:\n- Aviso destacado en la Plataforma\n- Correo electrónico a su dirección registrada\n- Solicitud de re-aceptación al iniciar sesión\n\n### 13.2 Historial de Versiones\n\nMantenemos un historial de versiones anteriores de esta Política, disponible bajo solicitud.\n\n---\n\n## 14. Contacto\n\nPara preguntas, solicitudes o quejas relacionadas con esta Política de Privacidad:\n\n**Correo electrónico:** privacidad@picks4all.com\n**Tiempo de respuesta:** Nos esforzamos por responder a todas las solicitudes dentro de 15 días hábiles.\n\n---\n\n## 15. Información Adicional para Colombia\n\n### 15.1 Responsable del Tratamiento\n\nEl responsable del tratamiento de sus datos personales es el operador de la Plataforma Picks4All.\n\n### 15.2 Finalidades\n\nLas finalidades del tratamiento están descritas en la Sección 3 de esta Política.\n\n### 15.3 Derechos del Titular\n\nSus derechos como titular de los datos están descritos en la Sección 7.2.\n\n### 15.4 Autoridad de Control\n\nPuede presentar quejas ante:\n- **Superintendencia de Industria y Comercio (SIC)**\n- Carrera 13 No. 27-00, Bogotá D.C., Colombia\n- www.sic.gov.co\n\n---\n\n*Al utilizar la Plataforma, usted confirma que ha leído, entendido y aceptado esta Política de Privacidad.*',
  'Versión inicial de la Política de Privacidad.',
  'es',
  true,
  NOW(),
  NOW(),
  NOW(),
  NOW()
) ON CONFLICT DO NOTHING;
